<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>إدارة المواد الدراسية</title>
    <link rel="stylesheet" href="../../global.css" />
    <link rel="stylesheet" href="manage_courses.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h3 class="txt-center">إدارة المواد الدراسية</h3>
      </header>

      <section class="form-section">
        <h4 class="black">إضافة مادة جديدة</h4>
        <!-- أضفنا id للنموذج لتسهيل التعامل معه -->
        <form id="courseForm">
          <div class="form-group">
            <label class="txt-right" for="course-name">اسم المادة</label>
            <input
              class="input"
              type="text"
              id="course-name"
              name="course-name"
              placeholder="أدخل اسم المادة الجديدة"
              required
            />
          </div>
          <button type="submit" class="btn btn-add">إضافة المادة</button>
        </form>
      </section>

      <section class="table-section">
        <h4 class="black">قائمة المواد الدراسية</h4>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>رقم المادة</th>
                <th>اسم المادة</th>
                <th>إجراءات</th>
              </tr>
            </thead>
            <!-- قمنا بإزالة الصفوف الثابتة وأضفنا id للـ tbody -->
            <tbody id="coursesTableBody"></tbody>
          </table>
        </div>
      </section>
      <a class="btn btn-back" href="../admin_dashboard/admin_dashboard.html">
        العودة إلى لوحة التحكم
      </a>
    </div>

    <script>
      const form = document.getElementById("courseForm");
      const courseNameInput = document.getElementById("course-name");
      const tableBody = document.getElementById("coursesTableBody");

      let courses = [
        { id: 1, name: "تحليلات الأعمال والتنقيب في البيانات" },
        { id: 2, name: "الأساليب الكمية واتخاذ القرارات" },
        { id: 3, name: "مشروع التخرج 2" },
        { id: 4, name: "إدارة المواد البشرية" },
        { id: 5, name: "استراتيجية نظم المعلومات" },
      ];

      function renderCourses() {
        tableBody.innerHTML = "";

        courses.forEach((course) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${course.id}</td>
            <td>${course.name}</td>
            <td class="actions">
              <button class="btn btn-edit btn-sm" onclick="editCourse(${course.id})">تعديل</button>
              <button class="btn btn-delete btn-sm" onclick="deleteCourse(${course.id})">حذف</button>
            </td>
          `;
          tableBody.appendChild(row);
        });
      }

      function deleteCourse(id) {
        if (confirm("هل أنت متأكد من حذف هذه المادة؟")) {
          courses = courses.filter((course) => course.id !== id);
          renderCourses();
        }
      }

      function editCourse(id) {
        const courseToEdit = courses.find((course) => course.id === id);
        if (!courseToEdit) return;

        const newName = prompt("أدخل الاسم الجديد للمادة:", courseToEdit.name);

        if (newName && newName.trim() !== "") {
          courseToEdit.name = newName.trim();
          renderCourses();
        }
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const newCourseName = courseNameInput.value.trim();

        if (newCourseName) {
          const newId =
            courses.length > 0 ? Math.max(...courses.map((c) => c.id)) + 1 : 1;

          const newCourse = {
            id: newId,
            name: newCourseName,
          };

          courses.push(newCourse);

          renderCourses();

          courseNameInput.value = "";
        } else {
          alert("الرجاء إدخال اسم المادة.");
        }
      });

      renderCourses();
    </script>
  </body>
</html>
